<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ™ºèƒ½ç°½è³¬è»å¸« V56.0</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ç°½è³¬è»å¸«">
    <style>
        :root {
            --boc:#c8960c;--hsbc:#db0011;--hangseng:#008154;
            --sc:#1a56a0;--ccb:#003b8e;--aeon:#800080;
            --citic:#7b5ea7;--mox:#05d5a1;--dbs:#e85d04;--citi:#003087;
            --miles:#004a99;--cash:#d32f2f;--bg:#f2f5f8;
        }
        *{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--bg);margin:0;padding:env(safe-area-inset-top) 10px 90px 10px;color:#1a1a1a;}
        .container{max-width:650px;margin:10px auto;background:#fff;padding:20px;border-radius:24px;box-shadow:0 10px 40px rgba(0,0,0,0.06);}

        /* Header */
        header{text-align:center;margin-bottom:15px;border-bottom:2px solid #f0f2f5;padding-bottom:12px;}
        header h1{margin:0;font-size:22px;font-weight:800;letter-spacing:-1px;}
        header p{margin:4px 0 0;font-size:11px;color:#888;}
        #syncStatus{font-size:11px;color:#aaa;text-align:center;margin-bottom:10px;min-height:1em;}

        /* Bottom Tab Nav */
        .tab-nav{position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid #eee;display:flex;z-index:100;padding-bottom:env(safe-area-inset-bottom);}
        .tab-btn{flex:1;padding:12px 0 8px;border:none;background:none;font-size:10px;font-weight:700;color:#aaa;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:3px;transition:0.2s;}
        .tab-btn .tab-icon{font-size:20px;}
        .tab-btn.active{color:#db0011;}
        .tab-panel{display:none;}
        #tab-calc{display:block;}

        /* å¡ç‰‡ç®¡ç† */
        .manager-toggle-btn{width:100%;padding:12px;background:#f0f2f5;border:1px solid #ddd;border-radius:12px;font-size:13px;font-weight:700;color:#555;cursor:pointer;margin-bottom:15px;display:flex;justify-content:center;align-items:center;gap:8px;}
        .card-manager-content{display:none;background:#fafafa;border:1px solid #eee;border-radius:20px;padding:15px;margin-bottom:20px;animation:slideDown 0.3s ease-out;}
        @keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}
        .bank-name-label{font-size:11px;font-weight:700;color:#aaa;text-transform:uppercase;margin:10px 0 5px;}
        .toggle-grid{display:flex;flex-wrap:wrap;gap:6px;}
        .toggle-card-btn{padding:8px 12px;border-radius:10px;border:1.5px solid #eee;font-size:11px;font-weight:700;cursor:pointer;background:#fff;color:#ccc;transition:0.2s;}
        .toggle-card-btn.active.hsbc{border-color:var(--hsbc);color:var(--hsbc);background:#fff5f5;}
        .toggle-card-btn.active.boc{border-color:var(--boc);color:var(--boc);background:#fffbf0;}
        .toggle-card-btn.active.hangseng{border-color:var(--hangseng);color:var(--hangseng);background:#f5fff5;}
        .toggle-card-btn.active.ccb{border-color:var(--ccb);color:var(--ccb);background:#f5f8ff;}
        .toggle-card-btn.active.sc{border-color:var(--sc);color:var(--sc);background:#f0f5ff;}
        .toggle-card-btn.active.citic{border-color:var(--citic);color:var(--citic);background:#faf5ff;}
        .toggle-card-btn.active.mox{border-color:var(--mox);color:#111;background:#f0fffc;}
        .toggle-card-btn.active.aeon{border-color:var(--aeon);color:var(--aeon);background:#fff5ff;}
        .toggle-card-btn.active.dbs{border-color:var(--dbs);color:var(--dbs);background:#fff8f0;}
        .toggle-card-btn.active.citi{border-color:var(--citi);color:var(--citi);background:#f0f4ff;}

        /* æœå°‹ */
        .search-section{background:linear-gradient(135deg,#1a1a1a,#333);color:#fff;padding:18px;border-radius:20px;margin-bottom:18px;}
        .search-section label{font-size:12px;color:#bbb;display:block;margin-bottom:7px;}
        #merchantSearch{width:100%;padding:13px;border-radius:12px;border:none;font-size:16px;font-weight:700;outline:none;color:#000;}
        .match-hint{font-size:13px;color:#4caf50;margin-top:8px;font-weight:bold;min-height:1.2em;}

        /* è¼¸å…¥ */
        .input-row{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:12px;}
        .input-group{flex:1;min-width:270px;}
        label{display:block;margin-bottom:6px;font-weight:700;font-size:13px;color:#555;}
        select,input[type="number"],input[type="date"]{width:100%;padding:12px;border:1.5px solid #eee;border-radius:12px;font-size:15px;background:#fafafa;outline:none;}
        .date-status-tag{font-size:12px;font-weight:800;margin-top:4px;display:block;padding:6px 10px;border-radius:8px;line-height:1.6;}
        .is-red{background:#ffebee;color:#d32f2f;}
        .is-normal{background:#f0f0f0;color:#666;}
        .toggle-container{display:flex;gap:5px;background:#f0f0f0;padding:4px;border-radius:12px;}
        .toggle-btn{flex:1;padding:11px 5px;border:1.5px solid transparent;border-radius:9px;cursor:pointer;font-size:12px;font-weight:700;color:#666;background:none;transition:0.2s;}
        .toggle-btn:not(:last-child){border-right:1.5px solid #d0d0d0;border-radius:0;}
        .toggle-btn:first-child{border-radius:9px 0 0 9px;}
        .toggle-btn:last-child{border-radius:0 9px 9px 0;}
        .toggle-btn.active{background:#fff;color:#000;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
        .toggle-btn.disabled{opacity:0.35;cursor:not-allowed;}

        /* å¡ç‰‡é¸æ“‡å™¨ï¼ˆè¨˜å¸³ç”¨ï¼‰ */
        .card-select-row{margin-bottom:12px;}

        /* æŒ‰éˆ• */
        .analyze-btn{width:100%;padding:16px;background:#db0011;color:#fff;border:none;border-radius:15px;font-size:17px;font-weight:800;cursor:pointer;margin-top:8px;touch-action:manipulation;-webkit-tap-highlight-color:transparent;}
        .add-txn-btn{width:100%;padding:14px;background:#004a99;color:#fff;border:none;border-radius:15px;font-size:15px;font-weight:800;cursor:pointer;margin-top:8px;touch-action:manipulation;-webkit-tap-highlight-color:transparent;}
        .card-bottom{display:flex;justify-content:flex-end;margin-top:8px;}
        .record-btn{background:#1a56a0;color:#fff;border:none;border-radius:10px;padding:6px 16px;font-size:13px;font-weight:700;cursor:pointer;touch-action:manipulation;-webkit-tap-highlight-color:transparent;}
        .record-btn:active{opacity:0.8;}

        /* çµæœ */
        .section-header{margin-top:25px;padding-bottom:10px;border-bottom:2px solid #eee;font-size:17px;font-weight:800;}
        .section-header.miles{color:var(--miles);}
        .section-header.cash{color:var(--cash);}
        .card-box{border:1px solid #f0f0f0;border-radius:18px;padding:16px;margin-top:12px;border-left:6px solid #ccc;background:#fff;}
        .boc-card{border-left-color:var(--boc);}.hsbc-card{border-left-color:var(--hsbc);}.hangseng-card{border-left-color:var(--hangseng);}.sc-card{border-left-color:var(--sc);}.ccb-card{border-left-color:var(--ccb);}.citic-card{border-left-color:var(--citic);}.mox-card{border-left-color:var(--mox);}.aeon-card{border-left-color:var(--aeon);}.dbs-card{border-left-color:var(--dbs);}.citi-card{border-left-color:var(--citi);}
        .card-top{display:flex;justify-content:space-between;align-items:flex-start;}
        .earn-val{font-size:22px;font-weight:900;text-align:right;letter-spacing:-0.5px;}
        .promo-tag{background:#fff3e0;color:#e65100;font-size:10px;padding:2px 6px;border-radius:4px;font-weight:800;display:inline-block;margin-top:4px;border:1px solid #ffe0b2;}
        .card-desc{font-size:12px;color:#777;margin-top:10px;border-top:1px dashed #eee;padding-top:10px;line-height:1.5;}
        .remark-tip{font-size:11px;color:#e65100;font-weight:600;margin-top:5px;padding:4px 0;display:block;border-top:1px solid #fff3e0;}

        /* â”€â”€ é€²åº¦é¢æ¿ â”€â”€ */
        .progress-card{background:#fafafa;border:1px solid #eee;border-radius:18px;padding:16px;margin-bottom:16px;}
        .annual-total{font-size:14px;color:#555;margin-bottom:12px;}
        .annual-total strong{color:#1a56a0;font-size:18px;}
        .annual-chart{display:flex;gap:4px;align-items:flex-end;height:100px;margin:12px 0 4px;}
        .annual-bar-col{flex:1;display:flex;flex-direction:column;align-items:center;gap:2px;}
        .annual-bar-amt{font-size:8px;color:#888;height:14px;text-align:center;}
        .annual-bar-wrap{flex:1;width:100%;display:flex;align-items:flex-end;min-height:60px;}
        .annual-bar{width:100%;background:#1a56a0;border-radius:3px 3px 0 0;min-height:0;transition:height .3s;}
        .annual-bar.current-month{background:#e53935;}
        .annual-bar.future-month{background:#e0e0e0;}
        .annual-bar-label{font-size:9px;color:#888;text-align:center;}
        .current-label{color:#e53935;font-weight:700;}
        .annual-cards{margin-top:12px;border-top:1px solid #eee;padding-top:10px;}
        .annual-card-row{display:flex;justify-content:space-between;padding:4px 0;font-size:13px;border-bottom:1px solid #f5f5f5;}
        .annual-card-name{color:#444;}
        .annual-card-amt{font-weight:700;color:#1a56a0;}
        .annual-empty{color:#aaa;font-size:13px;text-align:center;padding:8px;}
        .annual-progress-total{font-size:13px;color:#555;margin-bottom:10px;}
        .annual-progress-total strong{color:#1a56a0;font-size:16px;}
        .annual-progress-row{margin-bottom:10px;}
        .annual-progress-info{display:flex;justify-content:space-between;margin-bottom:3px;}
        .annual-progress-name{font-size:13px;color:#333;}
        .annual-progress-amt{font-size:13px;font-weight:700;color:#1a56a0;}
        .annual-progress-bar-wrap{height:10px;background:#f0f0f0;border-radius:5px;overflow:hidden;}
        .annual-progress-bar{height:100%;border-radius:5px;transition:width .4s ease;}
        .progress-title{display:flex;justify-content:space-between;align-items:center;font-size:14px;font-weight:800;margin-bottom:12px;}
        .progress-amt{font-size:13px;font-weight:700;color:#555;}
        .progress-amt.reached{color:#4caf50;}
        .progress-bar-wrap{background:#eee;border-radius:99px;height:10px;overflow:hidden;margin-bottom:8px;}
        .progress-bar{height:100%;border-radius:99px;transition:width 0.5s ease;}
        .progress-sub{font-size:12px;color:#666;margin-bottom:8px;}
        .progress-affected{display:flex;flex-wrap:wrap;gap:5px;margin-top:8px;}
        .affected-tag{font-size:10px;padding:3px 8px;border-radius:6px;background:#eee;color:#aaa;font-weight:700;}
        .affected-tag.active{background:#e8f5e9;color:#2e7d32;}
        /* æ¨å»£å€’æ•¸ */
        .promo-progress-row{display:flex;justify-content:space-between;align-items:flex-start;padding:10px 0;border-bottom:1px dashed #eee;}
        .promo-progress-row:last-child{border-bottom:none;}
        .promo-progress-name{font-size:13px;font-weight:700;margin-bottom:3px;}
        .promo-progress-date{font-size:11px;color:#888;}
        .promo-remark{display:block;font-size:10px;color:#e65100;margin-top:3px;}
        .days-badge{font-size:12px;font-weight:800;padding:4px 10px;border-radius:99px;white-space:nowrap;}
        .days-ok{background:#e8f5e9;color:#2e7d32;}
        .days-warning{background:#fff3e0;color:#e65100;}
        .days-urgent{background:#ffebee;color:#c62828;}
        /* å°é ‚é€²åº¦ */
        .cap-row{margin-bottom:14px;}
        .cap-label{display:flex;justify-content:space-between;margin-bottom:5px;}
        .cap-card-name{font-size:12px;font-weight:800;}
        .cap-detail{font-size:11px;color:#888;}
        .cap-bar-wrap{background:#eee;border-radius:99px;height:8px;overflow:hidden;margin-bottom:4px;}
        .cap-bar{height:100%;border-radius:99px;transition:width 0.4s ease;}
        .cap-numbers{font-size:11px;color:#666;display:flex;align-items:center;gap:8px;}
        .cap-reached{color:#9e9e9e;text-decoration:line-through;}
        .cap-full-tag{background:#ffebee;color:#c62828;font-size:10px;padding:1px 6px;border-radius:4px;font-weight:800;}


        /* â”€â”€ æœˆæ›† â”€â”€ */
        .cal-wrap{padding:4px 0 16px;}
        .cal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
        .cal-nav-btn{background:none;border:none;font-size:28px;color:#db0011;cursor:pointer;padding:0 12px;line-height:1;touch-action:manipulation;}
        .cal-title-block{text-align:center;}
        .cal-month-label{font-size:20px;font-weight:800;color:#1a1a1a;}
        .cal-month-summary{font-size:12px;color:#888;margin-top:2px;}
        .cal-weekdays{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:4px;}
        .cal-weekday{text-align:center;font-size:11px;font-weight:700;color:#aaa;padding:4px 0;}
        .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:2px;}
        .cal-cell{min-height:52px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;padding:4px 2px;transition:0.15s;-webkit-tap-highlight-color:transparent;touch-action:manipulation;}
        .cal-cell:active{opacity:0.7;}
        .cal-empty{cursor:default;}
        .cal-day-num{font-size:14px;font-weight:600;color:#333;}
        .cal-day-amt{font-size:10px;color:#db0011;font-weight:700;margin-top:1px;}
        .cal-has-txn{background:#fff5f5;}
        .cal-today .cal-day-num{background:#db0011;color:#fff;border-radius:50%;width:26px;height:26px;display:flex;align-items:center;justify-content:center;}
        .cal-selected{background:#ffe0e0;border:2px solid #db0011;}
        .cal-detail{margin-top:16px;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 2px 12px rgba(0,0,0,0.06);}
        .cal-detail-header{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#db0011;color:#fff;font-weight:700;font-size:14px;}
        .cal-detail-total{font-size:15px;}
        .cal-txn-row{display:flex;justify-content:space-between;align-items:center;padding:11px 16px;border-bottom:1px solid #f5f5f5;border-left:4px solid #eee;}
        .cal-txn-info{}
        .cal-txn-merchant{font-size:14px;font-weight:600;color:#1a1a1a;}
        .cal-txn-meta{font-size:11px;color:#aaa;margin-top:2px;}
        .cal-txn-amt{font-size:15px;font-weight:700;color:#db0011;}
        .cal-no-txn{text-align:center;padding:24px;color:#aaa;font-size:14px;}


        /* â”€â”€ æœˆæ›† â”€â”€ */
        .cal-container{padding:4px 0;width:100%;box-sizing:border-box;}
        .cal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
        .cal-nav{background:none;border:none;font-size:28px;color:#1a56a0;cursor:pointer;padding:4px 12px;border-radius:10px;touch-action:manipulation;}
        .cal-nav:active{background:#f0f5ff;}
        .cal-title-wrap{text-align:center;}
        .cal-title{font-size:18px;font-weight:800;color:#1a1a1a;}
        .cal-month-total{font-size:12px;color:#666;margin-top:2px;}
        .cal-month-total strong{color:#db0011;}
        .cal-weekdays{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:4px;}
        .cal-weekday{text-align:center;font-size:12px;font-weight:700;color:#888;padding:4px 0;}
        .cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:3px;width:100%;}
        .cal-day{min-height:52px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4px 2px;cursor:default;position:relative;}
        .cal-day.empty{background:none;}
        .cal-day.has-txn{background:#fff5f5;cursor:pointer;border:1px solid #ffd0d0;}
        .cal-day.has-txn:active{background:#ffe0e0;}
        .cal-day.today .cal-day-num{background:#1a56a0;color:#fff;border-radius:50%;width:24px;height:24px;display:flex;align-items:center;justify-content:center;}
        .cal-day.active{background:#fff0f0;border:1.5px solid #db0011 !important;}
        .cal-day-num{font-size:13px;font-weight:600;color:#1a1a1a;line-height:1.4;}
        .cal-day-amt{font-size:10px;color:#db0011;font-weight:700;margin-top:1px;}
        .cal-detail{display:none;margin-top:16px;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 2px 12px rgba(0,0,0,0.08);}
        .cal-detail-header{display:flex;justify-content:space-between;align-items:center;padding:13px 16px;background:#1a56a0;color:#fff;font-size:14px;font-weight:800;}
        .cal-detail-total{font-size:16px;font-weight:800;}
        .cal-txn-row{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #f5f5f5;border-left:4px solid #eee;}
        .cal-txn-row:last-child{border-bottom:none;}
        .cal-txn-info{display:flex;flex-direction:column;gap:3px;}
        .cal-txn-merchant{font-size:14px;font-weight:700;color:#1a1a1a;}
        .cal-txn-meta{font-size:11px;color:#aaa;}
        .cal-txn-amt{font-size:15px;font-weight:800;color:#db0011;white-space:nowrap;}
        .cal-no-txn{text-align:center;padding:24px;color:#bbb;font-size:13px;}

        /* â”€â”€ äº¤æ˜“è¨˜éŒ„ â”€â”€ */
        .txn-add-form{background:#fafafa;border:1px solid #eee;border-radius:18px;padding:16px;margin-bottom:16px;}
        .txn-add-title{font-size:14px;font-weight:800;margin-bottom:12px;}
        .txn-month-header{display:flex;justify-content:space-between;align-items:center;font-size:12px;font-weight:800;color:#888;text-transform:uppercase;margin:12px 0 6px;}
        .txn-month-total{font-size:14px;color:#db0011;}
        .txn-empty{font-size:13px;color:#bbb;text-align:center;padding:20px 0;}
        .txn-row{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-radius:12px;margin-bottom:6px;border-left:4px solid #eee;background:#fff;box-shadow:0 1px 4px rgba(0,0,0,0.04);}
        .txn-row.boc-card{border-left-color:var(--boc);}.txn-row.hsbc-card{border-left-color:var(--hsbc);}.txn-row.hangseng-card{border-left-color:var(--hangseng);}.txn-row.sc-card{border-left-color:var(--sc);}.txn-row.ccb-card{border-left-color:var(--ccb);}.txn-row.citic-card{border-left-color:var(--citic);}.txn-row.mox-card{border-left-color:var(--mox);}.txn-row.aeon-card{border-left-color:var(--aeon);}.txn-row.dbs-card{border-left-color:var(--dbs);}.txn-row.citi-card{border-left-color:var(--citi);}.cal-txn-row.boc-card{border-left-color:var(--boc);}.cal-txn-row.hsbc-card{border-left-color:var(--hsbc);}.cal-txn-row.hangseng-card{border-left-color:var(--hangseng);}.cal-txn-row.sc-card{border-left-color:var(--sc);}.cal-txn-row.ccb-card{border-left-color:var(--ccb);}.cal-txn-row.citic-card{border-left-color:var(--citic);}.cal-txn-row.mox-card{border-left-color:var(--mox);}.cal-txn-row.aeon-card{border-left-color:var(--aeon);}.cal-txn-row.dbs-card{border-left-color:var(--dbs);}.cal-txn-row.citi-card{border-left-color:var(--citi);}
        .txn-merchant{font-size:13px;font-weight:700;}
        .txn-meta{font-size:11px;color:#aaa;margin-top:2px;}
        .txn-right{display:flex;align-items:center;gap:10px;}
        .txn-amt{font-size:15px;font-weight:800;color:#db0011;}
        .txn-delete-btn{background:none;border:none;color:#ccc;font-size:16px;cursor:pointer;padding:4px;}
        .txn-delete-btn:hover{color:#db0011;}

        @media(max-width:450px){.input-group{min-width:100%;}}
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
<div class="container">
    <header>
        <h1>ğŸ’³ æ™ºèƒ½ç°½è³¬è»å¸« V56.0</h1>
        <p>æ¨¡çµ„åŒ– | JSON é©…å‹• | Firebase é›²ç«¯åŒæ­¥</p>
    </header>
    <div id="syncStatus">ğŸ”„ åˆå§‹åŒ–ä¸­...</div>

    <!-- â”€â”€ è¨ˆç®— Tab â”€â”€ -->
    <div id="tab-calc" class="tab-panel">
        <button id="managerToggleBtn" class="manager-toggle-btn">âš™ï¸ ç·¨è¼¯æˆ‘çš„å¡ç‰‡æ¸…å–®</button>
        <div id="cardManagerPanel" class="card-manager-content">
            <div id="bankGroupsContainer"></div>
        </div>

        <div class="search-section">
            <label>ğŸ” æœå°‹å•†æˆ¶ (fresh, ç™¾ä½³, mtr, Apple, è¬å¯§...)</label>
            <input type="text" id="merchantSearch" placeholder="æœå°‹å•†æˆ¶åç¨±...">
            <div id="matchHint" class="match-hint"></div>
        </div>

        <div class="input-row">
            <div class="input-group">
                <label>ç•¶æœˆç´¯ç©ç°½è³¬ (HKD) <span style="font-size:10px;color:#4caf50">â— è‡ªå‹•åŒæ­¥</span></label>
                <input type="number" id="currentSpent" value="0" readonly style="background:#f0fff0;">
            </div>
            <div class="input-group">
                <label>æœ¬æ¬¡é‡‘é¡ (HKD)</label>
                <input type="number" id="amount" placeholder="é‡‘é¡" inputmode="numeric">
            </div>
        </div>

        <div class="input-row">
            <div class="input-group">
                <label>ç°½è³¬æ—¥æœŸ</label>
                <input type="date" id="txnDate">
                <div id="dateStatus" class="date-status-tag"></div>
            </div>
            <div class="input-group">
                <label>æ”¯ä»˜æ–¹å¼</label>
                <div style="display:flex;flex-direction:column;gap:5px;">
                    <div class="toggle-container">
                        <button id="meth-ap" class="toggle-btn active">æ‰‹æ©Ÿæ”¯ä»˜</button>
                        <button id="meth-bank" class="toggle-btn">éŠ€è¡Œç¹³è²»</button>
                    </div>
                    <div class="toggle-container">
                        <button id="meth-on" class="toggle-btn">ç¶²ä¸Š/App</button>
                        <button id="meth-nonbank" class="toggle-btn">ééŠ€è¡Œç¹³è²»</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-group" style="margin-bottom:12px;">
            <label>é¡åˆ¥åˆ¤å®š</label>
            <select id="category">
                <option value="General">-- ä¸€èˆ¬æœ¬åœ°æ¶ˆè²» --</option>
                <option value="Dining">ğŸ½ï¸ é¤é£²é£Ÿè‚†</option>
                <option value="Online">ğŸ›ï¸ ä¸€èˆ¬ç¶²è³¼</option>
                <option value="Electronics">ğŸ”Œ é›»å­ç”¢å“/é›»è¨Š</option>
                <option value="Super">ğŸ›’ è¶…ç´šå¸‚å ´</option>
                <option value="Transport">ğŸšŒ äº¤é€š/å«è»Š/æ²¹ç«™</option>
                <option value="Home">ğŸ  å®¶å±…ç”¨å“</option>
                <option value="Pet">ğŸ¾ å¯µç‰©è­·ç†</option>
                <option value="Leisure">ğŸ¡ ä¼‘é–’å¨›æ¨‚</option>
                <option value="Medical">ğŸ¥ é†«ç™‚æœå‹™</option>
                <option value="Sport">ğŸ‘Ÿ é‹å‹•æœé£¾</option>
                <option value="Fitness">ğŸ‹ï¸ å¥èº«ä¸­å¿ƒ</option>
                <option value="Travel">âœˆï¸ æ—…éŠæ©Ÿç¥¨/é…’åº—</option>
                <option value="Jewelry">ğŸ’ ç å¯¶æœé£¾</option>
                <option value="Coffee">â˜• å’–å•¡è¼•é£Ÿ</option>
                <option value="Overseas">ğŸŒ æµ·å¤–å¤–å¹£</option>
                <option value="Insurance">ğŸ›¡ï¸ ä¿éšªä¿è²»</option>
            </select>
        </div>

        <div class="card-select-row" style="display:none;">
            <label>ä½¿ç”¨ä¿¡ç”¨å¡ï¼ˆè¨˜å¸³ç”¨ï¼‰</label>
            <select id="txnCardSelect">
                <option value="">-- é¸æ“‡ä¿¡ç”¨å¡ --</option>
            </select>
        </div>

        <button id="analyzeBtn" class="analyze-btn" style="display:none;">ç²¾ç¢ºé‹ç®—æœ€ä½³åˆ†çµ„æ’åº</button>
        <button id="addTxnBtn" class="add-txn-btn" style="display:none;">â• è¨˜éŒ„æ­¤ç­†ç°½è³¬</button>

        <div id="results" style="display:none;">
            <div class="section-header miles">âœˆï¸ é‡Œæ•¸å„ªå…ˆå»ºè­° (é«˜è‡³ä½)</div>
            <div id="miles-results"></div>
            <div class="section-header cash">ğŸ’° ç¾é‡‘å›è´ˆå»ºè­° (é«˜è‡³ä½)</div>
            <div id="cash-results"></div>
        </div>
    </div>

    <!-- â”€â”€ é€²åº¦ Tab â”€â”€ -->
    <div id="tab-progress" class="tab-panel">
        <div id="progress-threshold"></div>
        <div id="progress-promos"></div>
        <div id="progress-caps"></div>
        <div id="progress-annual-cards"></div>
        <div id="progress-annual"></div>
    </div>

    <!-- â”€â”€ äº¤æ˜“è¨˜éŒ„ Tab â”€â”€ -->
    <div id="tab-txn" class="tab-panel">
        <div style="display:flex;gap:8px;margin-bottom:12px;">
            <button id="exportExcelBtn" style="flex:1;padding:9px;border-radius:12px;border:1.5px solid #1a56a0;background:#f0f5ff;color:#1a56a0;font-weight:700;font-size:13px;cursor:pointer;">ğŸ“¥ åŒ¯å‡º Excel</button>
            <label style="flex:1;padding:9px;border-radius:12px;border:1.5px solid #008154;background:#f5fff5;color:#008154;font-weight:700;font-size:13px;cursor:pointer;text-align:center;">
                ğŸ“¤ åŒ¯å…¥ Excel
                <input type="file" id="importExcelInput" accept=".xlsx,.xls" style="display:none;">
            </label>
        </div>
        <div id="txn-list"></div>
    </div>

    <!-- â”€â”€ æœˆæ›† Tab â”€â”€ -->
    <div id="tab-calendar" class="tab-panel">
        <div id="calendar-container" style="padding:0 4px;width:100%;box-sizing:border-box;"></div>
    </div>

</div>

<!-- åº•éƒ¨ Tab å°èˆª -->
<nav class="tab-nav">
    <button class="tab-btn active" data-tab="calc">
        <span class="tab-icon">ğŸ§®</span>è¨ˆç®—
    </button>
    <button class="tab-btn" data-tab="progress">
        <span class="tab-icon">ğŸ“Š</span>é€²åº¦
    </button>
    <button class="tab-btn" data-tab="txn">
        <span class="tab-icon">ğŸ“‹</span>è¨˜éŒ„
    </button>
    <button class="tab-btn" data-tab="calendar">
        <span class="tab-icon">ğŸ“…</span>æœˆæ›†
    </button>
</nav>

<script type="module" src="./js/app.js"></script>
</body>
</html>
